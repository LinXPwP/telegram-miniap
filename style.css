/* ============================
   PALETĂ & GLOBAL (ROȘU)
   ============================ */
:root {
  --bg: #111214;
  --bg-alt: #18191c;
  --bg-elevated: #202225;
  --bg-soft: #2b2d31;
  --bg-soft-alt: #313338;

  --accent: #ff1843;
  --accent-soft: #ff4b7a;
  --accent-danger: #f04747;

  --text: #fdfdfd;
  --muted: #a3a6b5;
  --border-subtle: rgba(255, 255, 255, 0.06);
  --radius-lg: 18px;
  --radius-md: 12px;
  --radius-sm: 8px;
  --transition-fast: 0.12s ease-out;
  --transition-med: 0.2s ease-out;
}

*,
*::before,
*::after {
  box-sizing: border-box;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
    "Segoe UI", sans-serif;
}

html, body { height: 100%; scroll-behavior: smooth; }
body {
  margin: 0;
  padding: 0;
  min-height: 100vh;
  background: var(--bg);
  color: var(--text);
}

/* ============================
   LAYOUT – USER FULLSCREEN
   ============================ */
.container { max-width: 100%; padding: 0; margin: 0; min-height: 100vh; }
body[data-page="user"] .card--user {
  position: relative;
  max-width: 100%;
  margin: 0;
  padding: 10px;
  min-height: 100vh;
  height: 100vh;
  display: flex; flex-direction: column;
  background: var(--bg);
  border-radius: 0; border: none; box-shadow: none; overflow: hidden;
}

/* card effect kept subtle (not visible in fullscreen) */
.card { position: relative; }

/* ============================
   VIEWS
   ============================ */
.view { display: none; flex-direction: column; min-height: 0; flex: 1; }
.view.active { display: flex; }

/* ============================
   SHOP TOPBAR (only in Shop)
   ============================ */
.shop-topbar {
  display: flex; justify-content: flex-end; align-items: center;
  gap: 8px; margin-bottom: 8px;
}
.credits-pill {
  display: inline-flex; gap: 6px; align-items: center;
  padding: 4px 10px; border-radius: 999px;
  background: #202225; border: 1px solid rgba(255,255,255,0.08);
  font-size: 11px; color: var(--muted);
}
.credits-pill .value { color: #fff; font-weight: 700; }

/* ============================
   SECTION / TEXT
   ============================ */
.section-title {
  font-size: 11px; text-transform: uppercase; letter-spacing: 0.16em;
  color: var(--muted); margin: 0 0 6px;
}

/* ============================
   SHOP – LISTE
   ============================ */
.categories { display: flex; flex-direction: column; gap: 8px; margin-top: 2px; }
.category {
  border-radius: var(--radius-md); padding: 8px 10px;
  background: #202225; border: 1px solid var(--border-subtle);
  transition: border-color var(--transition-fast), transform var(--transition-fast), background var(--transition-fast);
}
.category:hover { background: #26282c; border-color: rgba(255,255,255,0.16); transform: translateY(-1px); }
.category-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 4px; }
.category-name { font-size: 13px; font-weight: 600; }
.category-pill { font-size: 9px; text-transform: uppercase; padding: 2px 7px; border-radius: 999px; background: #2b2d31; color: var(--muted); }
.category-desc { font-size: 11px; color: var(--muted); margin-bottom: 6px; }

.products { display: flex; flex-direction: column; gap: 6px; }
.product {
  display: flex; justify-content: space-between; align-items: center; gap: 8px;
  padding: 6px 7px; border-radius: var(--radius-sm);
  background: #2b2d31; border: 1px solid rgba(0,0,0,0.4);
  transition: background var(--transition-fast), border-color var(--transition-fast), transform var(--transition-fast);
}
.product:hover { background: #313338; border-color: rgba(255,255,255,0.12); transform: translateY(-0.5px); }
.product-main { display: flex; flex-direction: column; gap: 2px; max-width: 68%; }
.product-name { font-size: 13px; font-weight: 600; }
.product-desc { font-size: 11px; color: var(--muted); white-space: nowrap; text-overflow: ellipsis; overflow: hidden; }
.product-price { font-size: 12px; font-weight: 600; color: var(--accent-soft); text-align: right; }

.product-panel {
  margin-top: 10px; border-radius: var(--radius-md); padding: 10px;
  background: #202225; border: 1px solid rgba(255,255,255,0.1);
  animation: panelIn 0.18s ease-out;
}
@keyframes panelIn { from { opacity:0; transform: translateY(-3px)} to {opacity:1; transform: translateY(0)} }
.product-panel-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 4px; }
.product-panel-name { font-size: 14px; font-weight: 700; }
.product-panel-close { border: none; background: transparent; color: var(--muted); font-size: 18px; cursor: pointer; padding: 0 4px; }
.product-panel-desc { font-size: 12px; color: var(--muted); margin-bottom: 4px; }
.product-panel-price { font-size: 12px; margin-bottom: 6px; }
.qty-row { display: flex; align-items: center; gap: 8px; margin-bottom: 8px; }
.qty-label { font-size: 12px; }
.qty-row input {
  width: 70px; padding: 5px 6px; border-radius: 999px;
  border: 1px solid rgba(255,255,255,0.12); background: #111214; color: var(--text);
  font-size: 12px; text-align: center;
}
.qty-range { font-size: 11px; color: var(--muted); }

/* ============================
   TICKETS – TOPBAR
   ============================ */
.tickets-topbar {
  position: sticky; top: 0; z-index: 60;
  display: grid; grid-template-columns: auto 1fr auto; align-items: center;
  gap: 8px; padding: 6px 8px; margin-bottom: 6px;
  background: #202225; border: 1px solid rgba(255,255,255,0.06);
  border-radius: var(--radius-md);
}
.tickets-title {
  text-align: center; font-size: 13px; font-weight: 700; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}

/* buton 3 linii (inline, nu fixed) */
.tickets-menu-toggle {
  width: 36px; height: 26px; border-radius: 999px;
  border: 1px solid rgba(255,255,255,0.16);
  background: #202225; display: inline-flex; align-items: center; justify-content: center;
  gap: 3px; padding: 0 6px; cursor: pointer;
  transition: background var(--transition-fast), border-color var(--transition-fast), transform var(--transition-fast), box-shadow var(--transition-fast);
}
.tickets-menu-toggle span { width: 14px; height: 2px; border-radius: 999px; background: #f5f5ff; display: block; }
.tickets-menu-toggle:hover { background: #2f3136; border-color: var(--accent-soft); box-shadow: 0 0 8px rgba(0,0,0,0.7); transform: translateY(-0.5px); }

.btn-small { font-size: 11px; padding: 6px 10px; }

/* ============================
   CHAT – LAYOUT
   ============================ */
.chat-layout { position: relative; flex: 1; min-height: 0; display: flex; flex-direction: column; margin-top: 4px; }
.chat-main {
  border-radius: var(--radius-md); background: #2b2d31; border: 1px solid rgba(0,0,0,0.7);
  display: flex; flex-direction: column; min-height: 0; flex: 1;
}
.chat-messages { flex: 1; padding: 4px 4px 4px 8px; overflow-y: auto; }

/* Drawer pentru user (stânga) */
body[data-page="user"] .chat-sidebar {
  position: fixed; top: 0; bottom: 0; left: 0;
  width: min(320px, 80vw);
  border-radius: 0 12px 12px 0; background: #202225; border-right: 1px solid rgba(0,0,0,0.9);
  display: flex; flex-direction: column; overflow-y: auto; font-size: 12px;
  transform: translateX(-105%); opacity: 0; pointer-events: none;
  transition: transform var(--transition-med), opacity var(--transition-med), box-shadow var(--transition-med);
  z-index: 40;
}
body[data-page="user"] .tickets-backdrop {
  position: fixed; inset: 0; background: rgba(0,0,0,0.7);
  opacity: 0; pointer-events: none; transition: opacity var(--transition-med); z-index: 30;
}
body[data-page="user"] #ticketsView.tickets-drawer-open .chat-sidebar {
  transform: translateX(0); opacity: 1; pointer-events: auto; box-shadow: 0 18px 45px rgba(0,0,0,0.9);
}
body[data-page="user"] #ticketsView.tickets-drawer-open .tickets-backdrop {
  opacity: 1; pointer-events: auto;
}

/* chat list items */
.chat-item { padding: 8px 10px; border-bottom: 1px solid rgba(0,0,0,0.5); cursor: pointer;
  transition: background var(--transition-fast), transform var(--transition-fast); }
.chat-item:hover { background: #2b2d31; transform: translateY(-0.5px); }
.chat-item.active { background: #393c43; box-shadow: inset 3px 0 0 var(--accent); }
.chat-item-title { font-weight: 600; font-size: 12px; }
.chat-item-line { font-size: 11px; color: var(--muted); white-space: nowrap; text-overflow: ellipsis; overflow: hidden; }
.chat-item-header-row { display: flex; justify-content: space-between; align-items: center; gap: 6px; }

.ticket-status-pill {
  font-size: 10px; padding: 2px 8px; border-radius: 999px; text-transform: uppercase; letter-spacing: 0.08em;
  border: 1px solid rgba(255,255,255,0.12);
}
.ticket-status-pill.open { background: rgba(87,242,135,0.11); border-color: rgba(87,242,135,0.7); color: #b0ffd0; }
.ticket-status-pill.closed { background: rgba(240,71,71,0.12); border-color: rgba(240,71,71,0.7); color: #ffafb7; }

.unread-badge {
  min-width: 18px; padding: 1px 6px; border-radius: 999px;
  background: var(--accent-danger); color: #fff; font-size: 10px; font-weight: 600; text-align: center;
}

/* ============================
   MESAJE – DISCORD STYLE
   ============================ */
.msg-row {
  position: relative; display: flex; align-items: flex-start; gap: 8px;
  padding: 4px 10px; border-radius: 8px; margin-bottom: 2px; transition: background 0.1s ease-out;
}
.msg-row:hover { background: rgba(255,255,255,0.04); }
.msg-avatar { flex: 0 0 32px; height: 32px; border-radius: 50%; background: var(--accent); display: flex; align-items: center; justify-content: center; font-size: 14px; font-weight: 600; color: #fff; user-select: none; }
.msg-content { flex: 1; min-width: 0; display: flex; flex-direction: column; }
.msg-header-line { display: flex; align-items: baseline; gap: 4px; margin-bottom: 2px; }
.msg-username { font-size: 13px; font-weight: 600; color: #f1f3ff; }
.msg-username--admin { color: #57f287; }
.msg-timestamp { font-size: 11px; color: var(--muted); }
.msg-bubble { position: relative; padding: 0; margin: 0; }
.msg-text { font-size: 13px; line-height: 1.4; color: #f3f4ff; padding-right: 70px; }
.msg-text--deleted { color: var(--muted); font-style: italic; }
.msg-meta { margin-top: 2px; font-size: 10px; color: var(--muted); }

.msg-reply-preview {
  display: inline-flex; align-items: center; max-width: 100%;
  margin-bottom: 2px; padding: 2px 6px; border-radius: 4px; border-left: 2px solid var(--accent-soft);
  background: rgba(255,255,255,0.03); font-size: 11px; color: var(--muted);
  cursor: pointer; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;
}
.msg-reply-preview strong { margin-right: 4px; color: #fff; }

.msg-actions {
  position: absolute; top: 0; right: 0; transform: translateY(-50%);
  display: flex; gap: 4px; opacity: 0; pointer-events: none;
  transition: opacity 0.1s ease-out, transform 0.1s ease-out;
}
.msg-row:hover .msg-actions { opacity: 1; pointer-events: auto; transform: translateY(-50%) translateX(0); }
.msg-action-btn { border: none; background: transparent; color: var(--muted); font-size: 11px; padding: 0 4px; cursor: pointer; transition: color 0.1s ease-out; }
.msg-action-btn:hover { color: #ffffff; }
.msg-action-btn--danger { color: var(--accent-danger); }
.msg-action-btn--danger:hover { color: #ff8f94; }

.msg-row--highlight { animation: msgHighlight 1s ease-out; }
@keyframes msgHighlight { 0% { background: rgba(255,24,67,0.32);} 100% { background: rgba(255,255,255,0.04);} }

/* ============================
   CHAT INPUT
   ============================ */
.chat-input { border-top: 1px solid rgba(0,0,0,0.6); padding: 6px; display: flex; flex-direction: column; gap: 4px; background: #313338; }
.chat-mode-bar { font-size: 11px; color: var(--muted); padding: 2px 6px; border-radius: 6px; background: rgba(0,0,0,0.3); display: flex; justify-content: space-between; align-items: center; gap: 6px; }
.chat-input-row { display: flex; gap: 6px; align-items: center; }
.chat-input input {
  flex: 1; border-radius: 999px; border: 1px solid rgba(0,0,0,0.7);
  background: #1e1f22; color: var(--text); padding: 6px 10px; font-size: 12px;
}
.chat-input button {
  border: none; border-radius: 999px; background: var(--accent); color: #fff; font-size: 12px; padding: 7px 12px; cursor: pointer;
  transition: background var(--transition-fast), transform var(--transition-fast), box-shadow var(--transition-fast);
}
.chat-input button:hover { background: var(--accent-soft); transform: translateY(-0.5px); box-shadow: 0 4px 12px rgba(0,0,0,0.5); }

/* ghost */
.btn-ghost {
  border-radius: 999px; padding: 6px 10px; border: 1px solid rgba(255,255,255,0.14);
  background: #2b2d31; font-size: 11px; color: var(--muted); cursor: pointer;
  transition: background var(--transition-fast), border-color var(--transition-fast), transform var(--transition-fast), color var(--transition-fast);
}
.btn-ghost:hover { background: #313338; border-color: rgba(255,255,255,0.26); color: var(--text); transform: translateY(-0.5px); }

/* Înapoi la Shop */
.back-to-shop {
  position: fixed; left: 12px; bottom: 12px; z-index: 70;
  border: 1px solid rgba(255,255,255,0.16); background: #202225; color: #fff;
  border-radius: 999px; padding: 8px 12px; font-size: 12px; cursor: pointer;
  transition: background var(--transition-fast), transform var(--transition-fast), border-color var(--transition-fast);
}
.back-to-shop:hover { background: #2f3136; border-color: var(--accent-soft); transform: translateY(-0.5px); }

/* ============================
   SCROLLBARS
   ============================ */
.chat-sidebar, .chat-messages, .shop-container {
  scrollbar-width: thin; scrollbar-color: var(--accent) transparent;
}
.chat-sidebar::-webkit-scrollbar, .chat-messages::-webkit-scrollbar, .shop-container::-webkit-scrollbar { width: 6px; }
.chat-sidebar::-webkit-scrollbar-track, .chat-messages::-webkit-scrollbar-track, .shop-container::-webkit-scrollbar-track { background: transparent; }
.chat-sidebar::-webkit-scrollbar-thumb, .chat-messages::-webkit-scrollbar-thumb, .shop-container::-webkit-scrollbar-thumb { background: var(--accent); border-radius: 999px; }

/* ============================
   RESPONSIVE
   ============================ */
@media (max-width: 900px) {
  .chat-messages { padding-right: 6px; }
  body[data-page="user"] .chat-sidebar { width: min(300px, 80vw); }
}
