<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8" />
  <title>Telegram MiniApp ‚Äì Discord Style Chat</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Telegram WebApp JS -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- ECRAN EROARE ‚Äì afi»ôat dacƒÉ nu e pornit din Telegram corect -->
  <div id="error-screen" class="error-screen">
    <div class="error-card">
      <div class="error-logo">TX</div>
      <h1>Acces mini-app</h1>
      <p>
        AceastƒÉ aplica»õie trebuie deschisƒÉ din Telegram folosind
        comanda <strong>/start</strong> √Æn bot »ôi apoi butonul de mini-app.
      </p>
      <ol>
        <li>Deschide Telegram.</li>
        <li>IntrƒÉ pe bot »ôi scrie <code>/start</code>.</li>
        <li>ApasƒÉ pe butonul ‚ÄûDeschide mini-app‚Äù.</li>
      </ol>
      <p class="error-foot">
        DacƒÉ vezi asta √Æn browser simplu, nu este permis accesul direct.
      </p>
    </div>
  </div>

  <!-- APP ROOT ‚Äì dacƒÉ totul e ok √Æn Telegram, ascundem error-screen »ôi arƒÉtƒÉm asta -->
  <div id="app-root" class="hidden">
    <!-- Bara de sus -->
    <header class="top-bar">
      <div class="top-left">
        <div class="logo-circle">TX</div>
        <div class="top-title">
          <span class="top-title-main">Telegram MiniApp</span>
          <span class="top-title-sub">Discord Style ‚Ä¢ Black/Red ‚Ä¢ 2025</span>
        </div>
      </div>

      <div class="top-right">
        <button id="open-full-btn" class="ghost-btn">
          üîó Versiune completƒÉ
        </button>

        <div id="current-user" class="user-pill">
          <div id="current-user-avatar" class="user-avatar user-avatar-sm"></div>
          <div class="user-info">
            <span id="current-user-name" class="user-name">@‚Ä¶</span>
            <span id="current-user-tag" class="user-tag">Utilizator</span>
          </div>
        </div>
      </div>
    </header>

    <!-- Layout principal: Canale (st√¢nga), Chat (mijloc), Online (dreapta) -->
    <main class="layout">
      <!-- ST√ÇNGA ‚Äì CATEGORII + CANALE + PANOU ADMIN -->
      <section class="channels-panel">
        <div class="panel-header">
          <h2>Server</h2>
        </div>

        <div id="category-list" class="category-list">
          <!-- Populat din JS -->
        </div>

        <!-- Admin panel (vizibil doar la admin) -->
        <div class="admin-section" id="admin-panel">
          <div class="sidebar-title">
            Admin Panel
          </div>
          <div class="admin-controls">
            <input
              type="text"
              id="new-category-name"
              class="input"
              placeholder="Nume categorie"
            />
            <button id="create-category-btn" class="primary-btn">
              + Categorie
            </button>

            <input
              type="text"
              id="new-channel-name"
              class="input"
              placeholder="Nume canal (#general)"
            />
            <select id="category-select" class="input"></select>
            <button id="create-channel-btn" class="primary-btn">
              + Canal
            </button>
          </div>
        </div>
      </section>

      <!-- MIJLOC ‚Äì CHAT -->
      <section class="chat-panel">
        <div class="panel-header chat-header">
          <div class="chat-header-main">
            <span id="active-channel-name">#general</span>
            <span id="active-channel-category" class="chip">Default</span>
          </div>
          <div class="chat-header-sub">
            Istoric salvat local (demo) ‚Ä¢ Stil Discord
          </div>
        </div>

        <div id="chat-history" class="chat-history">
          <!-- Mesaje -->
        </div>

        <div class="chat-input-bar">
          <textarea
            id="chat-input"
            class="chat-input"
            rows="1"
            placeholder="Scrie un mesaj..."
          ></textarea>
          <button id="send-btn" class="primary-btn">
            Trimite
          </button>
        </div>
      </section>

      <!-- DREAPTA ‚Äì ONLINE -->
      <aside class="sidebar">
        <div class="sidebar-section">
          <div class="sidebar-title">
            <span>Online</span>
            <span id="online-count" class="badge">0</span>
          </div>
          <div id="online-list" class="online-list">
            <!-- populat din JS -->
          </div>
        </div>
      </aside>
    </main>
  </div>

  <script src="app.js"></script>
</body>
</html>
